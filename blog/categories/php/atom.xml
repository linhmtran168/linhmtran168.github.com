<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Php | Linh M. Tran]]></title>
  <link href="http://linhmtran168.github.io/blog/categories/php/atom.xml" rel="self"/>
  <link href="http://linhmtran168.github.io/"/>
  <updated>2013-12-20T00:55:20+07:00</updated>
  <id>http://linhmtran168.github.io/</id>
  <author>
    <name><![CDATA[Linh M. Tran]]></name>
    <email><![CDATA[linh.mtran168@live.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA['Setup Boris With MAMP in Mac OSX Mavericks']]></title>
    <link href="http://linhmtran168.github.io/blog/2013/12/10/setup-boris-with-mamp-in-mac-osx-mavericks/"/>
    <updated>2013-12-10T11:34:39+07:00</updated>
    <id>http://linhmtran168.github.io/blog/2013/12/10/setup-boris-with-mamp-in-mac-osx-mavericks</id>
    <content type="html"><![CDATA[<p>For me who is used to having REPL as an essential tools for development, <a href="https://github.com/d11wtq/boris">Boris</a> is a must have when developing PHP web app.
But after updating to MAMP 2.0 and PHP 5.5.3, it stopped working. There is no error output, the REPL just doesn&rsquo;t appear.
After several hours of googling, I found out the reason is that MAMP&rsquo;s PHP is built with out <strong>pcntl</strong> and <strong>readline</strong> support, which boris depends on. To get those features, there is no other way then manually compile and add them to MAMP&rsquo;s PHP installation.</p>

<p>First, we need to download the source code for MAMP&rsquo;s PHP. In my case it&rsquo;s PHP 5.5.3</p>

<p>```sh
$ php -v
Copyright &copy; 1997-2013 The PHP Group
Zend Engine v2.5.0, Copyright &copy; 1998-2013 Zend Technologies</p>

<pre><code>with Zend OPcache v7.0.3-dev, Copyright (c) 1999-2013, by Zend Technologies
</code></pre>

<p>$ wget <a href="http://museum.php.net/php5/php-5.5.3.tar.gz">http://museum.php.net/php5/php-5.5.3.tar.gz</a>
$ tar -xzvf php-5.5.3.tar.gz
```</p>

<p>After that change the folder name to <strong><em>php</em></strong> and move it <strong><em>include</em></strong> folder in MAMP&rsquo;s PHP 5.5.3 folder</p>

<p><code>sh
$ mv php-5.5.3 php
$ mkdir -p /Applications/MAMP/bin/php/php5.5.3/include
$ mv php /Applications/MAMP/bin/php/php5.5.3/include
</code></p>

<p>Then, use the configure it to prepare all the necessary header files</p>

<p><code>sh
$ cd /Applications/MAMP/bin/php/php5.5.3/include/php
$ ./configure
</code></p>

<p>Now, we process to build the <strong>pcntl</strong> and <strong>readline</strong> extension.
But before that, we must set some flags so that they are compiled with dual 32bit and 64bit architecture as MAMP PHP was built this way.</p>

<p><code>sh
$ MACOSX_DEPLOYMENT_TARGET=10.9
$ CFLAGS="-arch i386 -arch x86_64 -g -Os -pipe -no-cpp-precomp"
$ CCFLAGS="-arch i386 -arch x86_64 -g -Os -pipe"
$ CXXFLAGS="-arch i386 -arch x86_64 -g -Os -pipe"
$ LDFLAGS="-arch i386 -arch x86_64 -bind_at_load"
$ export CFLAGS CXXFLAGS LDFLAGS CCFLAGS MACOSX_DEPLOYMENT_TARGET
</code></p>

<p>Now, what left is compiling the extensions, move the compiled <strong><em>.so</em></strong> files to MAMP&rsquo;s PHP extensions directory:</p>

<p><code>sh
$ cd ext/pcntl
$ phpize
$ ./configure
$ make
$ cp modules/pcntl.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212
$ cd ../readline
$ phpize
$ ./configure
$ make
$ cp modules/readline.so /Applications/MAMP/bin/php/php5.5.3/lib/php/extensions/no-debug-non-zts-20121212
</code></p>

<p>Finally edit the MAMP&rsquo;s PHP php.ini file to include those extensions</p>

<p><code>sh
$ echo "extension=pcntl.so\nextension=readline.so" &gt;&gt; /Applications/MAMP/bin/php/php5.5.3/conf/php.ini
</code>
Now we are done, just install boris if you haven&rsquo;t done so and enjoy playing PHP code in the terminal</p>

<p><code>sh
$ brew install boris
$ boris
[1] boris&gt; echo "Hello World!\n";
Hello World!
[2] boris&gt;
</code></p>
]]></content>
  </entry>
  
</feed>
